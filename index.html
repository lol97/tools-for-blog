<!DOCTYPE html>
<html lang="en">
<head>
    <!-- highlight -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tools For Blog</title>

    <!-- start bootstrap-5 -->
    <link rel="stylesheet" href="assets/bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <script src="assets/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
    <!-- end bootstrap-5 -->

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: whitesmoke;
        }
    </style>
</head>
<body>
    <div class="text-center display-4 mb-3">
        Tools For Blogger
    </div>

    <div class="container mt-5">
        <div class="mb-3">
            <h5>Parse Source Code to HTML Blogger</h5>
            <p class="small">Escape all HTML tags</p>
        </div>
        <div class="row">
            <div class="col-md-5">
                <h4>Source Code</h4>
                <textarea class="form-control" id="source-code" rows="20"></textarea>
            </div>
            <div class="col-md-2 d-flex flex-column justify-content-center align-items-center">
                <label for="syn-for" class="form-label">Type code:</label>
                <input type="text" class="form-control mb-3" id="syn-for">
                <button class="btn btn-primary" id="convert-data" >Convert</button>
            </div>
            <div class="col-md-5">
                <h4>HTML Blogger</h4>
                <textarea class="form-control" id="html-blogger" rows="20"></textarea>
            </div>
        </div>
    </div>
   
    <script src="script/jquery-3.7.1.min.js"></script>
    <script>
        

        function convert() {
            var ele1 = document.getElementById("source-code");
            var replaced;
            
            replaced = formatIndentation(ele1.value);
            replaced = replaced.replace(/&/ig, "&amp;");
            replaced = replaced.replace(/</ig, "&lt;");
            replaced = replaced.replace(/>/ig, "&gt;");
            replaced = replaced.replace(/"/ig, "&quot;");
            replaced = replaced.replace(/'/ig, "&#039;");
            replaced = replaced.replace(/&#177;/ig, "&plusmn;");
            replaced = replaced.replace(/&#169;/ig, "&copy;");
            replaced = replaced.replace(/&#174;/ig, "&reg;");
            replaced = replaced.replace(/ya'll/ig, "ya'll");

            var prefix = '<pre>\n<code class="'+ $("#syn-for").val() +'"> \n';
            var postfix = ' \n</code>\n</pre>';
            
            var ele2 = document.getElementById("html-blogger");
            ele2.value = prefix + replaced + postfix;
        }

        function formatIndentation(code) {
            const tabSize = 4; // Number of spaces per tab
            const spaces = ' '.repeat(tabSize);
            return code.split('\n').map(line => line.replace(/\t/g, spaces)).join('\n');
        }
        
        function doConvert() {
            var textData = $("#text-code").val();
            var replaced;
            replaced = textData;
            replaced = textData.replace(/&/ig, "&amp;");
            replaced = textData.replace(/</ig, "&lt;");
            replaced = textData.replace(/>/ig, "&gt;");
            replaced = textData.replace(/"/ig, "&quot;");
            replaced = textData.replace(/'/ig, "&#039;");
            replaced = textData.replace(/&#177;/ig, "&plusmn;");
            replaced = textData.replace(/&#169;/ig, "&copy;");
            replaced = textData.replace(/&#174;/ig, "&reg;");
            replaced = textData.replace(/ya'll/ig, "ya'll");
            
            $("#res-text-code").val(replaced);
        }

        $(function() {
            $("#convert-data").on('click', function(){
                convert();
                //doConvert(); //dont know why not wrong 
            });
        });
    </script>
</body>
</html>